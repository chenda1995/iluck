!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pages/pc/goodsfavs/index",[],t):"object"==typeof exports?exports["pages/pc/goodsfavs/index"]=t():e["pages/pc/goodsfavs/index"]=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(){MoGu.Temp=MoGu.Temp||{},MoGu.Temp.getImageURL=s.get,MoGu.Temp.getImageSize=function(e){return e.match(/(\d+)x(\d+)/),[RegExp.$1,RegExp.$2]};var e=$(window).width()>1212;p&&p.destory(),p=new a({url:"//favorite.mogujie.com/jsonp/itemCollect/1",wrap:$("#imagewall_container"),tpl:["{{~it.feeds :feed:i}}",'<div class="iwf goods_item" data-tradeitemid="{{=feed.mid}}">','<a rel="nofollow" href="{{=feed.url}}" class="img" target="_blank"><img src="{{=MoGu.Temp.getImageURL(feed.img+"_220x330.jpg")}}" alt="{{=feed.title}}"></a>','<p class="title">',"{{ if(feed.leftbottom_taglist){ }}",'<span class="icon_xp">',"{{~feed.leftbottom_taglist:imgSrc:imgIndex}}",'<img src="{{=feed.leftbottom_taglist[imgIndex]}}" class="tagImage">',"{{~}}","</span>","{{ } }}",'<a rel="nofollow" href="{{=feed.url}}" target="_blank" {{ if(!feed.ctags && !feed.leftbottom_taglist){ }} style="width:220px" {{ } }} {{ if(feed.promotionImg){ }} class="one-line" {{ } }} >{{=feed.title}}</a>',"{{ if (feed.promotionImg) { }}","<br />",'<img class="promotion-img" src="{{=feed.promotionImg}}">',"{{ } }}","</p>",'<div class="goods_info">','{{?feed.fullTuanImg}}<img class="pintuan" src="{{=feed.fullTuanImg}}" />{{?}}','{{?feed.price}}<b class="price_info">{{if(feed.price.indexOf("\xa5")){var price = feed.price.replace("\xa5","&yen;");}else if(feed.price.indexOf("\uffe5")){var price = feed.price.replace("\uffe5","&yen;");}}}{{=price}}</b>{{?}}','{{?feed.cfav}}<span class="fav_num">{{=feed.cfav}}<img src="https://s10.mogucdn.com/p2/160908/upload_27g4f1ch6akie83hacb676j622b9l_32x30.png" alt=""></span>{{?}}',"</div>","{{ if(feed.eleven_img){ }}",'<span class="icon_event_lefttop iwf_icon" style="width:{{=MoGu.Temp.getImageSize(feed.eleven_img)[0]}}px;height:{{=MoGu.Temp.getImageSize(feed.eleven_img)[1]}}px"><img src="{{=feed.eleven_img}}"></span>',"{{ }else if(feed.lefttop_taglist){ }}",'<span class="icon_event_lefttop iwf_icon iwf_icon_taglist">',"{{~feed.lefttop_taglist :tagImageValue:tagImageIndex}}",'<img src="{{=feed.lefttop_taglist[tagImageIndex]}}">',"{{~}}","</span>","{{ }else if(feed.tags && feed.tags[0]){ }}",'<a rel="nofollow" class="icon_yx iwf_icon" target="_blank" href="{{=feed.link}}">{{=feed.tags[0].text}}</a>',"{{ } }}",'{{?feed.atags}}<span class="atags">{{=feed.atags}}</span>{{?}}',"</div>","{{~}}"].join(""),startPage:1,scrollDiff:1e3,isfixWall:!1,data:{pf:"mgjpc",type:f[d]&&f[d].type||0,mbook:"eyJwYWdlIjoxfQ==",isWidth:e}}),p.addAfterLoadFeed(function(e){e.respone&&(p.postData.mbook=e.respone.mbook),e.isEnd&&$("#like_list_title").parent().append('<div id="like_list_nomore"><div>\u6ca1\u6709\u66f4\u591a\u5566~</div></div>'),f=e.respone&&e.respone.tabs||[],o()})}function o(){c||($("#filter").html(l.template(r)(f)),c=!0),$("#filter").on("click","li",function(){var e=$(this).index("#filter li");d!==e&&($("#filter li").removeClass("active"),$(this).addClass("active"),d=e,$("#imagewall_container").html(""),s.init(n))})}var a=i(1),s=i(3),r=i(4),l=MoGu.ui.getdoT(),d=0,f=[],c=!1,p=null;s.init(n)},function(e,t,i){var n,o,a=i(2);n=[],o=function(){var e=MoGu.ui.getdoT();if(e){var t=function(e){var t={url:"/book/ajax",wrap:null,tpl:"",data:{},startPage:1,cpc:[],firstData:[],scrollDiff:1e3,isfixWall:!0};e=$.extend({},t,e),this.container=e.wrap,this.feedTpl=e.tpl,this.url=e.url,this.isEnd=!1,this.loadError=!1,this.firstData=$.isArray(e.firstData)?e.firstData:[],this.cpc=$.isArray(e.cpc)?e.cpc:[],this.page=e.startPage>0?e.startPage:1,this.firstData.length&&1==this.page&&(this.page=2),this.winH=$(window).height(),this.refreshDocH(),this.scrollDiff=e.scrollDiff,this.loadingEl=$(".lr_loading"),this.isQuering=!1,this.screenNum=$("body").hasClass("media_screen_1200")?5:4,this.postData=e.data||{},this.isfixWall=$.inArray(e.isfixWall,[!0,!1])>-1?e.isfixWall:!0,this.init()};return t.prototype={init:function(){this.container.length&&""!=this.feedTpl&&(this.firstData.length&&this.renderFeeds(this.mixData(this.firstData)),this.addEvent())},addEvent:function(){this.randStr=this.randomString(5),this.onScrollEveName="scroll.lw_"+this.randStr,$(window).on(this.onScrollEveName,this.scrollEvent.bind(this)).trigger(this.onScrollEveName)},scrollEvent:function(e){var t=$(window),i=t.scrollTop();this.documentH-(i+this.winH)<=this.scrollDiff&&this.loadFeeds()},randomString:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var i="",n=0;e>n;n++)i+=t[Math.floor(Math.random()*t.length)];return i},getFeeds:function(){var e={section:this.page,mbook:MOGUPROFILE.mbook||"",location:MOGUPROFILE.location||""};return $.ajax({url:this.url,type:"get",dataType:"jsonp",data:$.extend({},e,this.postData)})},getIwfNum:function(){return this.container.find(".iwf").length},mixData:function(e){if(!this.cpc.length||!e.length)return e;for(var t,i,n=this.getIwfNum()%this.screenNum,o=e.length+n+1,a=parseInt(o/this.screenNum),s=[].concat(e),r=1;a+1>=r;r++)t=this.screenNum*r-n-1,i=this.cpc.shift(),i&&s.splice(t,0,i);return s},loadFeeds:function(e){if(!(this.isQuering||this.loadError||this.isEnd)){e=e||1;var t=this;this.isQuering=!0,this.loadingEl.show(),this.getFeeds().then(function(i){if("SESSION_INVALID"==i.returnCode)return void(location.href=a.getURLWithPtp(location.protocol+"//portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(location.href)));if(1001!=i.returnCode)return void t.stopLoading();data=i.data,1==t.page&&i.data&&i.data.list&&0==i.data.list.length&&$("#imagewall_container").append('<img style="width:40%;display: block;margin: 0 auto;" src="https://s10.mogucdn.com/p2/160802/upload_6ki3f17hbcbi9k6f44g83g66a292a_346x369.png"/>'),t.page++,t.isEnd=i.data.isEnd||!1,e--,t.isQuering=!1,t.loadingEl.hide();var n=t.mixData(data.list);if(t.renderFeeds(n),t.isEnd){var o=t.getIwfNum(),s=o%t.screenNum;t.isfixWall&&o>t.screenNum&&s&&t.container.find(".iwf").slice(o-s).remove(),t.renderPager(data.pagination),$(window).off(t.onScrollEveName)}t._afterLoad({page:t.page,isEnd:t.isEnd,respone:data}),!t.isEnd&&e>0&&t.loadFeeds(e)},function(){t.stopLoading()})}},stopLoading:function(){this.isQuering=!1,this.loadError=!0,this.loadingEl.hide(),$(window).off(this.onScrollEveName)},renderFeeds:function(t){this.container.append(e.template(this.feedTpl)({feeds:t})),this.refreshDocH()},renderPager:function(e){this.container.append(e)},refreshDocH:function(){this.documentH=$(document).height()},addAfterLoadFeed:function(e){this.afterLoadList||(this.afterLoadList=[]),$.isFunction(e)&&this.afterLoadList.push(e)},_afterLoad:function(e){this.afterLoadList||(this.afterLoadList=[]),$.each(this.afterLoadList,function(t,i){i(e)})},destory:function(){$(window).off(self.onScrollEveName,self.scrollEvent)}},t}}.apply(t,n),!(void 0!==o&&(e.exports=o))},function(e,t){"use strict";var i={getURLWithPtp:function(e){return window.logger?logger.generatePtpParams(e):e}};e.exports=i},function(e,t,i){var n,o;n=[],o=function(){var e,t=function(t){var i=MoGu.util.getCookie("mgj_issuppor_webp");if(""!==i)return"true"===i?e=!0:"false"===i&&(e=!1),void t();var n=new Image;n.onload=function(){e=!0,MoGu.util.setCookie("mgj_issuppor_webp","true",{express:30}),t()},n.onerror=function(){e=!1,MoGu.util.setCookie("mgj_issuppor_webp","false",{express:30}),t()},n.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},i=function(){return"undefined"==typeof e&&window.console&&window.console.log("\u6d4f\u89c8\u5668\u652f\u6301webp \u68c0\u6d4b\u51fa\u9519\uff0c\u539f\u56e0\u662f\uff1a\u4f7f\u7528\u524d\u672a\u8c03\u7528init \u521d\u59cb\u5316\u51fd\u6570"),!!e},n=function(e){if(!i())return e;var t=e.split("jpg"),n=t.length;return 2===n?-1==t[0].indexOf("png")&&-1==t[0].indexOf("gif")&&(e+="_999x999.v1c0.webp"):3===n&&(t.pop(),e=t.join("jpg")+"webp"),e};return{init:t,check:i,get:n}}.apply(t,n),!(void 0!==o&&(e.exports=o))},function(e,t){e.exports='{{~it:item:i}}\n<li {{?!i}}class="active"{{?}}>\n  {{=item.text}}\n  {{?item.count}}\n  ({{=item.count}})\n  {{?}}\n</li>\n{{~}}\n'}])}),"function"==typeof define&&define.amd&&require(["pages/pc/goodsfavs/index"]);